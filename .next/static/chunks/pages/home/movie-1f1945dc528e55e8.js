(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[524],{747:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/home/movie",function(){return r(5761)}])},5761:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>I});var i=r(4848),n=r(6540),s=r(5973),a=r(2907),o=r(3058),l=r(2413),d=r(3384),c=r(9686),p=r(2635),x=r(6715),u=r(6911),h=r(9785),m=r(2636),g=r(2705),w=r(6165),A=r(1468),j=r(2784),U=r(5529);let f=e=>{let{movie:t,loading:r,error:i}=(0,A.d4)(U.p9),s=(0,A.wA)();return(0,n.useEffect)(()=>{e&&s((0,j.nd)({id:e}))},[s,e]),{movie:t,loading:r,error:i}};var C=r(2664),E=r(9933);let b=()=>C.Ik().shape({[w.U6.NAME]:C.Yj().required(E.M.t("errors.requiredField")).max(50,E.M.t("errors.maxLengthChars",{value:50})),[w.U6.DESCRIPTION]:C.Yj().required(E.M.t("errors.requiredField")).max(50,E.M.t("errors.maxLengthChars",{value:50})),[w.U6.IMAGE_URL]:C.gl().required()});var v=r(1685);let y={[w.U6.NAME]:"",[w.U6.DESCRIPTION]:"",[w.U6.IMAGE_URL]:""},I=()=>{let e=(0,a.A)(),t=(0,v.jL)(),r=(0,x.useRouter)(),{id:A}=r.query,U=(0,h.mN)({resolver:(0,s.t)(b()),defaultValues:y,mode:"onTouched"}),{handleSubmit:C,reset:E,watch:I,formState:{isSubmitting:R,isValid:N}}=U,{movie:k}=f(A?Array.isArray(A)?A[0]:A:null),[_,O]=(0,n.useState)(null),[M,T]=(0,n.useState)(null);(0,n.useEffect)(()=>{k&&(E({[w.U6.NAME]:k.name||"",[w.U6.DESCRIPTION]:k.description||"",[w.U6.IMAGE_URL]:k.imageUrl||""}),T(k.imageUrl||null))},[k,E]);let L=(0,n.useCallback)(e=>{if(e.length>0){let t=e[0];O(t),T(URL.createObjectURL(t))}},[]);(0,n.useEffect)(()=>()=>{M&&URL.revokeObjectURL(M)},[M]);let S=(0,n.useCallback)(async()=>{let e=new FormData,{name:i,description:n}=I();if(e.append(w.U6.NAME,i),e.append(w.U6.DESCRIPTION,n),!_&&!A){m.Ay.error((0,p.t)("errors.uploadFile"));return}e.append(w.U6.IMAGE_URL,_);try{A?(await t((0,j.GW)({id:A,formData:e})).unwrap(),m.Ay.success((0,p.t)("success.updateCard"))):(await t((0,j.Pc)({formData:e})).unwrap(),m.Ay.success((0,p.t)("success.createCard")))}finally{r.push(w.uN.ROOT)}},[t,A,I,_,r]),{getRootProps:D,getInputProps:P}=(0,u.VB)({onDrop:L,accept:{"image/*":[]},maxFiles:1});return(0,i.jsxs)(o.A,{sx:{padding:"120px",minHeight:"90vh",width:"100%",[e.breakpoints.down("sm")]:{padding:"80px 24px 24px"}},children:[(0,i.jsx)(l.A,{variant:"h2",color:e.palette.common.white,children:A?(0,p.t)("Edit Movie"):(0,p.t)("Create movie")}),(0,i.jsx)(o.A,{sx:{paddingTop:"120px",[e.breakpoints.down("sm")]:{paddingTop:"80px"}},children:(0,i.jsx)(g.Op,{methods:U,onSubmit:C(S),children:(0,i.jsxs)(d.A,{direction:{xs:"column",sm:"row"},spacing:3,sx:{[e.breakpoints.down("sm")]:{flexDirection:"column",alignItems:"center"}},children:[(0,i.jsxs)(o.A,{...D(),sx:{border:"2px dashed gray",padding:"20px",textAlign:"center",cursor:"pointer",borderRadius:"4px",backgroundColor:"rgba(255, 255, 255, 0.1)",maxWidth:"470px",maxHeight:"504px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",[e.breakpoints.down("sm")]:{order:-1,maxWidth:"100%"}},children:[(0,i.jsx)("input",{...P()}),_||M?(0,i.jsx)("img",{src:M||(_?URL.createObjectURL(_):""),alt:(0,p.t)("uploadedImageAlt"),style:{maxWidth:"100%",maxHeight:"100%"}}):(0,i.jsxs)(o.A,{sx:{height:"500px",minWidth:"473px",display:"flex",alignItems:"center",gap:"20px",textAlign:"center",justifyContent:"center",flexDirection:"column"},children:[(0,i.jsx)(g.C0,{name:"Upload",height:24,width:24}),(0,i.jsx)(l.A,{variant:"body2",sx:{color:e.palette.common.white},children:(0,p.t)("inputs.upload")})]})]}),(0,i.jsxs)(d.A,{spacing:2,sx:{flex:1,width:"100%"},children:[(0,i.jsx)(g.Xs,{name:w.U6.NAME,placeholder:(0,p.t)("inputs.name"),fullWidth:!0}),(0,i.jsx)(g.Xs,{name:w.U6.DESCRIPTION,placeholder:(0,p.t)("inputs.title")}),(0,i.jsxs)(d.A,{direction:"row",spacing:2,sx:{justifyContent:"flex-start",paddingTop:"48px",[e.breakpoints.down("sm")]:{paddingTop:"24px",justifyContent:"space-between"}},children:[(0,i.jsx)(c.A,{variant:"contained",color:"primary",onClick:S,disabled:R||!N,sx:{width:"180px"},children:(0,p.t)("Save")}),(0,i.jsx)(c.A,{variant:"outlined",color:"secondary",onClick:()=>r.push(w.uN.ROOT),sx:{width:"180px",border:"1px solid ".concat(e.palette.common.white),color:e.palette.common.white,"&:hover":{border:"1px solid ".concat(e.palette.common.white)}},children:(0,p.t)("Cancel")})]})]})]})})})]})}},5529:(e,t,r)=>{"use strict";r.d(t,{IV:()=>i,p9:()=>n});let i=e=>e.movies,n=e=>e.movie}},e=>{var t=t=>e(e.s=t);e.O(0,[100,112,911,705,636,593,792],()=>t(747)),_N_E=e.O()}]);